{% extends 'base.html' %}

{% block content %}
    <div class="row">
<div  class="col-md-4 col-md-offset-1">
   <h3>{{ title }}</h3>
    <hr>
    <ol>
        {% for tree in tree_list %}
            {% comment %}<li>{{ tree.name }}
                &nbsp <a href="{% url 'workspace_update_tree' tree_id=tree.id %}" class="btn btn-warning">Редактировать</a>
            {% if user.is_superuser %}
                &nbsp <a href="{% url 'delete_tree' tree_id=tree.id %}" class="btn btn-danger">Удалить</a></li>
            {% endif %}{% endcomment %}
        {% endfor %}
    </ol>

    <a href="{% url 'mindmap' %}">Перейти на карту</a>
   {% comment %} <p>
    {{ jsonstr|linebreaks }}
    </p>{% endcomment %}

    <span>{{ jsonSer|linebreaks }}</span>
<hr>
<span>{{ jsonDeSer|linebreaks }}</span>

<input type="button" value="Run ajax Example" id="but" name="but" onclick="ajaxexmpl()"/>
<hr>

<input type="button" value="log_add_tree"  name="but" onclick="log_add_tree(1)"/>
<input type="button" value="log_get_tree"  name="but" onclick="log_get_tree(1)"/>
<input type="button" value="log_delete_tree"  name="but" onclick="log_delete_tree(1)"/>
<input type="button" value="log_update_tree"  name="but" onclick="log_update_tree(1)"/>
<hr>
<input type="button" value="log_get_object"  name="but" onclick="log_get_object(1)"/>
<input type="button" value="log_delete_object"  name="but" onclick="log_delete_object(1)"/>
<input type="button" value="log_update_object"  name="but" onclick="log_update_object(1)"/>
<input type="button" value="log_add_object"  name="but" onclick="log_add_object(1)"/>
<hr>
<input type="button" value="log_get_field"  name="but" onclick="log_get_field(1)"/>
<input type="button" value="log_delete_field"  name="but" onclick="log_delete_field(1)"/>
<input type="button" value="log_update_field"  name="but" onclick="log_update_field(1)"/>
<input type="button" value="log_add_field"  name="but" onclick="log_add_field(1)"/>

<hr>

   {% comment %} <a href="{% url 'workspace_new_tree' tree_name='new_tree' %}"  class="btn btn-primary">Создать новое дерево</a>{% endcomment %}
    <br>

    {% comment %}<input type="button" onclick="a()" value="adgadg" />{% endcomment %}
</div>
</div>
    <script>

    function ajaxexmpl(){
        alert('Вызов функции ajax');
        $.ajax({
            url : "/ajaxExmpl/",
            type : "POST",
            data : { 'the_post' : 'the_post' },
            dataType: 'json',
            success: function (data) {
                alert(data.post_text);
            }
    })
    }

    function log_add_tree(tree_id){
        $.ajax({
            url : "/new_tree/"+tree_id,
            type : "POST",
            data : { 'tree_id' : tree_id },
            dataType: 'json'
    })
    }

    function log_get_tree(tree_id){
        $.ajax({
            url : "/get_tree/"+tree_id,
            type : "POST",
            data : { 'tree_id' : tree_id },
            dataType: 'json'
    })
    }

    function log_delete_tree(tree_id){
        $.ajax({
            url : "/delete_tree/"+tree_id,
            type : "POST",
            data : { 'tree_id' : tree_id },
            dataType: 'json'
    })
    }

    function log_update_tree(tree_id){
        $.ajax({
            url : "/update_tree/"+tree_id,
            type : "POST",
            data : { 'tree_id' : tree_id },
            dataType: 'json'
    })
    }

    function log_add_object(object_id){
        $.ajax({
            url : "/new_object/"+object_id,
            type : "POST",
            data : { 'object_id' : object_id },
            dataType: 'json'
    })
    }

    function log_get_object(object_id){
        $.ajax({
            url : "/get_object/"+object_id,
            type : "POST",
            data : { 'object_id' : object_id },
            dataType: 'json'
    })
    }

    function log_delete_object(object_id){
        $.ajax({
            url : "/delete_object/"+object_id,
            type : "POST",
            data : { 'object_id' : object_id },
            dataType: 'json'
    })
    }

    function log_update_object(object_id){
        $.ajax({
            url : "/update_object/"+object_id,
            type : "POST",
            data : { 'object_id' : object_id },
            dataType: 'json'
    })
    }

    function log_add_field(field_id){
        $.ajax({
            url : "/new_field/"+field_id,
            type : "POST",
            data : { 'field_id' : field_id },
            dataType: 'json'
    })
    }

    function log_get_field(field_id){
        $.ajax({
            url : "/get_field/"+field_id,
            type : "POST",
            data : { 'field_id' : field_id },
            dataType: 'json'
    })
    }

    function log_delete_field(field_id){
        $.ajax({
            url : "/delete_field/"+field_id,
            type : "POST",
            data : { 'field_id' : field_id },
            dataType: 'json'
    })
    }

    function log_update_field(field_id){
        $.ajax({
            url : "/update_field/"+field_id,
            type : "POST",
            data : { 'field_id' : field_id },
            dataType: 'json'
    })
    }





    function a(){
        alert('tree count: ' + {{ tree_list.count }});
    }
    </script>

{% endblock %}

